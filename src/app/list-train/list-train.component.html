<section class="card">
    <header class="card-header">
        <div class="card-actions">
            <a href="#" class="card-action card-action-toggle" data-card-toggle></a>
        </div>
        <h2 class="card-title">Trains</h2>
    </header>
    <div class="card-body">
        <div class="row">
            <div class="col-sm-6">
                <div class="mb-3">
                    <button id="addToTable" (click)="addTrain()" class="btn btn-primary">New Train <i class="fas fa-plus"></i></button>
                </div>
            </div>
        </div>

        <div *ngIf="isLoading" class="text-center">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Loading trains...</p>
        </div>

        <div *ngIf="!isLoading && trains.length === 0" class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            No trains found. Click "New Train" to add one.
        </div>

        <table class="table table-bordered table-striped mb-0" *ngIf="!isLoading && trains.length > 0" id="datatable-editable">
            <thead>
                <tr>
                    <th>Train Number</th>
                    <th>Train Name</th>
                    <th>From Station</th>
                    <th>To Station</th>
                    <th>Seats</th>
                    <th>Fare (€)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let train of trains">
                    <td>{{ train.tr_no }}</td>
                    <td>{{ train.tr_name }}</td>
                    <td>{{ train.from_stn }}</td>
                    <td>{{ train.to_stn }}</td>
                    <td>{{ train.seats }}</td>
                    <td>€{{ train.fare.toFixed(2) }}</td>
                    <td>
                        <button class="btn btn-warning btn-sm me-1" (click)="editTrain(train)" title="Edit Train">
                            <i class="bx bx-edit"></i> Edit
                        </button>
                        <button class="btn btn-danger btn-sm" (click)="deleteTrain(train)" title="Delete Train">
                            <i class="bx bx-trash"></i> Delete
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>
