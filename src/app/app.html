<!-- Layout completo para páginas autenticadas -->
<section class="body" *ngIf="!isLoginPage">
  <header class="header">
    <div class="logo-container">
      <a href="#" class="logo">
        <img src="assets/train-logo.png" width="58" height="45" alt="Train Booking" />
      </a>
      <div class="d-md-none toggle-sidebar-left" data-toggle-class="sidebar-left-opened" data-target="html"
        data-fire-event="sidebar-left-opened">
        <i class="fas fa-bars" aria-label="Toggle sidebar"></i>
      </div>
    </div>
    <div class="header-right">
      <form action="#" class="search nav-form">
        <div class="input-group">
          <input type="text" class="form-control" name="q" id="q" placeholder="Buscar...">
          <button class="btn btn-default" type="submit"><i class="bx bx-search"></i></button>
        </div>
      </form>
      <span class="separator"></span>
      <div id="userbox" class="userbox" *ngIf="currentUser">
        <a href="#" data-bs-toggle="dropdown">
          <figure class="profile-picture">
            <img src="assets/img/!logged-user.jpg" alt="User" class="rounded-circle" />
          </figure>
          <div class="profile-info">
            <span class="name">{{ currentUser.username }}</span>
            <span class="role">{{ currentUser.role === 'ADMIN' ? 'Administrator' : 'Customer' }}</span>
          </div>
          <i class="fa custom-caret"></i>
        </a>

        <div class="dropdown-menu">
          <ul class="list-unstyled mb-2">
            <li class="divider"></li>
            <li>
              <a role="menuitem" tabindex="-1" href="#" (click)="logout()">
                <i class="bx bx-power-off"></i> Cerrar Sesión
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </header>
  <div class="inner-wrapper">
    <aside id="sidebar-left" class="sidebar-left">
      <div class="sidebar-header">
          <div class="sidebar-title">
              Menú
          </div>
          <div class="sidebar-toggle d-none d-md-block" data-toggle-class="sidebar-left-collapsed" data-target="html" data-fire-event="sidebar-left-toggle">
              <i class="fas fa-bars" aria-label="Toggle sidebar"></i>
          </div>
      </div>
      <div class="nano">
        <div class="nano-content">
          <nav id="menu" class="nav-main" role="navigation">
            <ul class="nav nav-main">
              <!-- Admin Menu -->
              <ng-container *ngIf="currentUser?.role === 'ADMIN'">
                <li>
                    <a class="nav-link" routerLink="/list-train" routerLinkActive="active">
                        <i class="bx bx-train" aria-hidden="true"></i>
                        <span>Manage Trains</span>
                    </a>                        
                </li>
                <li>
                    <a class="nav-link" routerLink="/add-train" routerLinkActive="active">
                        <i class="bx bx-plus-circle" aria-hidden="true"></i>
                        <span>Add Train</span>
                    </a>                        
                </li>
                <li>
                    <a class="nav-link" routerLink="/delete-train" routerLinkActive="active">
                        <i class="bx bx-minus-circle" aria-hidden="true"></i>
                        <span>Delete Train</span>
                    </a>
                </li>
                <li>
                    <a class="nav-link" routerLink="/update-train" routerLinkActive="active">
                        <i class="bx bx-edit" aria-hidden="true"></i>
                        <span>Update Train</span>
                    </a>                        
                </li>
              </ng-container>
              
              <!-- Customer Menu -->
              <ng-container *ngIf="currentUser?.role === 'CUSTOMER'">
                <li>
                    <a class="nav-link" routerLink="/booking" routerLinkActive="active">
                        <i class="bx bx-book-bookmark" aria-hidden="true"></i>
                        <span>Book Ticket</span>
                    </a>                        
                </li>
                <li>
                    <a class="nav-link" routerLink="/booking-history" routerLinkActive="active">
                          <i class="bx bx-history" aria-hidden="true"></i>
                        <span>Booking History</span>
                    </a>                        
                </li>
              </ng-container>
            </ul>
          </nav>
        </div>
      </div>
    </aside>
    <section role="main" class="content-body">
      <header class="page-header">
        <h2>{{title}}</h2>
    
        <div class="right-wrapper text-end">
          <ol class="breadcrumbs">
            <li>
              <a href="#">
                <i class="bx bx-home-alt"></i>
              </a>
            </li>    
            <li *ngFor="let crumb of breadcrumbs">
              <span>{{ crumb }}</span>
            </li>  
          </ol>
          <a class="sidebar-right-toggle" data-open="sidebar-right"></a>
        </div>
      </header>
      <router-outlet></router-outlet>
    </section>
  </div>
</section>

<!-- Layout simple para página de login -->
<div *ngIf="isLoginPage" class="login-layout">
  <router-outlet></router-outlet>
</div>